    - Snoopee that has the cache line in Dirty state must Pass Dirty to the Requester not to Home.
    - Snoopee must transition to I state.
    - Snoopee must not return data to Home.
    - RetToSrc bit value in the snoop is ignored and treated as 0.

For SnpPreferUnique and SnpPreferUniqueFwd, it is IMPLEMENTATION DEFINED when an agent is in the process of executing an exclusive sequence. To determine if a Snoopee treats SnpPreferUnique as an invalidating snoop or a non-invalidating snoop, the Snoop response must be inspected. It is protocol compliant for a Snoopee to always treat the snoop as non-invalidating.

Table B4.59 and Table B4.60 show the Snoopee cache state transitions and the required Snoop responses.

See Table B4.54 for the symbol key.

Table B4.59: State transitions for SnpPreferUniqueFwd when Snoopee is executing an exclusive sequence

| Snoopee cache state </br > Initial | Snoopee cache state </br> Final expected | Snoopee cache state </br> Final permitted | RetToSrc | Response to Requester | Response to Home               | TagOp value in response to Home </br> Initial start state of Dirty ᵃ | TagOp value in response to Home </br> Initial start state of Dirty | TagOp value in response to Home </br> Initial start state of Invalid or Clean |
|------------------------------------|------------------------------------------|-------------------------------------------|----------|-----------------------|--------------------------------|----------------------------------------------------------------------|--------------------------------------------------------------------|-------------------------------------------------------------------------------|
| I                                  | I                                        | -                                         | X        | No Fwd                | SnpResp\_I                     | -                                                                    | -                                                                  | -                                                                             |
| UC                                 | SC                                       | -                                         | 0        | CompData\_SC          | SnpResp\_SC\_Fwded\_SC         | -                                                                    | -                                                                  | -                                                                             |
| UC                                 | SC                                       | -                                         | 1        | CompData\_SC          | SnpRespData\_SC\_Fwded\_SC     | -                                                                    | -                                                                  | I,Transfer                                                                    |
| UCE                                | I                                        | -                                         | X        | No Fwd                | SnpResp\_I                     | -                                                                    | -                                                                  | -                                                                             |
| UD                                 | SD*                                      | -                                         | 0        | CompData\_SC          | SnpResp\_SD\_Fwded\_SC         | P                                                                    | -                                                                  | -                                                                             |
| UD                                 | SD*                                      | -                                         | 1        | CompData\_SC          | SnpRespData\_SD\_Fwded\_SC     | P                                                                    | Transfer                                                           | I,Transfer                                                                    |
| UD                                 | SC                                       | -                                         | X        | CompData\_SC          | SnpRespData\_SC\_PD\_Fwded\_SC | P                                                                    | Update                                                             | I,Transfer                                                                    |
| UDP                                | I                                        | -                                         | X        | No Fwd                | SnpRespDataPtl\_I\_PD          | -                                                                    | -                                                                  | I                                                                             |
| SC                                 | SC                                       | -                                         | 0        | CompData\_SC          | SnpResp\_SC\_Fwded\_SC         | -                                                                    | -                                                                  | -                                                                             |
| SC                                 | SC                                       | -                                         | 1        | CompData\_SC          | SnpRespData\_SC\_Fwded\_SC     | -                                                                    | -                                                                  | I,Transfer                                                                    |
| SD                                 | SD*                                      | -                                         | 0        | CompData\_SC          | SnpResp\_SD\_Fwded\_SC         | P                                                                    | -                                                                  | -                                                                             |
| SD                                 | SD*                                      | -                                         | 1        | CompData\_SC          | SnpRespData\_SD\_Fwded\_SC     | P                                                                    | Transfer                                                           | I,Transfer                                                                    |
| SD                                 | SC                                       | -                                         | X        | CompData\_SC          | SnpRespData\_SC\_PD\_Fwded\_SC | P                                                                    | Update                                                             | I,Transfer                                                                    |

- ᵃ Indicates if the transition itself is permitted or not. This column is only relevant when the tag initial state is Dirty.

Table B4.60 shows the expected and permitted Snoopee cache state transitions and responses to the SnpPreferUniqueFwd Snoop request when the Snoopee is not executing an Exclusive sequence.

See Table B4.54 for the symbol key.