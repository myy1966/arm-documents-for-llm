Table B4.56: SnpCleanFwd and SnpNotSharedDirtyFwd Snoopee state transitions with Clean and Dirty tags

| Snoopee cache state </br > Initial | Snoopee cache state </br> Final expected | Snoopee cache state </br> Final permitted | RetToSrc | Response to Requester | Response to Home               | TagOp value in response to Home </br> Initial start state of Dirty ᵃ | TagOp value in response to Home </br> Initial start state of Dirty | TagOp value in response to Home </br> Initial start state of Invalid or Clean |
|------------------------------------|------------------------------------------|-------------------------------------------|----------|-----------------------|--------------------------------|----------------------------------------------------------------------|--------------------------------------------------------------------|-------------------------------------------------------------------------------|
| I                                  | I                                        | -                                         | X ᵇ      | No Fwd                | SnpResp\_I                     | -                                                                    | -                                                                  | -                                                                             |
| UC                                 | SC                                       | I                                         | 0        | CompData\_SC          | SnpResp\_SC\_Fwded\_SC         | -                                                                    | -                                                                  | -                                                                             |
| UC                                 | SC                                       | I                                         | 1        | CompData\_SC          | SnpRespData\_SC\_Fwded\_SC     | -                                                                    | -                                                                  | I, Transfer                                                                   |
| UC                                 | I                                        | -                                         | 0        | CompData\_SC          | SnpResp\_I\_Fwded\_SC          | -                                                                    | -                                                                  | -                                                                             |
| UC                                 | I                                        | -                                         | 1        | CompData\_SC          | SnpRespData\_I\_Fwded\_SC      | -                                                                    | -                                                                  | I, Transfer                                                                   |
| UCE                                | I                                        | -                                         | X ᵇ      | No Fwd                | SnpResp\_I                     | -                                                                    | -                                                                  | -                                                                             |
| UD                                 | SD ᶜ	                                    | -                                         | 0        | CompData\_SC          | SnpResp\_SD\_Fwded\_SC         | P                                                                    | -                                                                  | -                                                                             |
| UD                                 | SD ᶜ	                                    | -                                         | 1        | CompData\_SC          | SnpRespData\_SD\_Fwded\_SC     | P                                                                    | Transfer                                                           | I, Transfer                                                                   |
| UD                                 | SC                                       | I                                         | X ᵇ      | CompData\_SC          | SnpRespData\_SC\_PD\_Fwded\_SC | P                                                                    | Update                                                             | I, Transfer                                                                   |
| UD                                 | I                                        | -                                         | X ᵇ      | CompData\_SC          | SnpRespData\_I\_PD\_Fwded\_SC  | P                                                                    | Update                                                             | I, Transfer                                                                   |
| UDP                                | I                                        | -                                         | X ᵇ      | No Fwd                | SnpRespDataPtl\_I\_PD          | -                                                                    | -                                                                  | I                                                                             |
| SC                                 | SC                                       | I                                         | 0        | CompData\_SC          | SnpResp\_SC\_Fwded\_SC         | -                                                                    | -                                                                  | -                                                                             |
| SC                                 | SC                                       | I                                         | 1        | CompData\_SC          | SnpRespData\_SC\_Fwded\_SC     | -                                                                    | -                                                                  | I, Transfer                                                                   |
| SC                                 | I                                        | -                                         | 0        | CompData\_SC          | SnpResp\_I\_Fwded\_SC          | -                                                                    | -                                                                  | -                                                                             |
| SC                                 | I                                        | -                                         | 1        | CompData\_SC          | SnpRespData\_I\_Fwded\_SC      | -                                                                    | -                                                                  | I, Transfer                                                                   |
| SD                                 | SD ᶜ                                     | -                                         | 0        | CompData\_SC          | SnpResp\_SD\_Fwded\_SC         | P                                                                    | -                                                                  | -                                                                             |
| SD                                 | SD ᶜ                                     | -                                         | 1        | CompData\_SC          | SnpRespData\_SD\_Fwded\_SC     | P                                                                    | Transfer                                                           | I, Transfer                                                                   |
| SD                                 | SC                                       | I                                         | X ᵇ      | CompData\_SC          | SnpRespData\_SC\_PD\_Fwded\_SC | P                                                                    | Update                                                             | I, Transfer                                                                   |
| SD                                 | I                                        | -                                         | X ᵇ      | CompData\_SC          | SnpRespData\_I\_PD\_Fwded\_SC  | P                                                                    | Update                                                             | I, Transfer                                                                   |

- ᵃ Indicates if the transition itself is permitted or not. This column is only relevant when the tag initial state is Dirty.
- ᵇ The protocol requirements apply for both states of RetToSrc.
- ᶜ This state transition is not permitted if DoNotGoToSD is asserted

#### B4.8.3.3 SnpSharedFwd

The rules, in addition to the common rules, to be followed by a Snoopee that receives a SnpSharedFwd are:

- Snoopee is permitted to forward the cache line in either SD or SC state.
- Snoopee must transition to either SD, SC, or I state.
- For behavior related to the RetToSrc bit see B4.9 Returning Data with Snoop response.

Table B4.57 shows the Snoopee cache state transition and the required Snoop responses.

See Table B4.54 for the symbol key.