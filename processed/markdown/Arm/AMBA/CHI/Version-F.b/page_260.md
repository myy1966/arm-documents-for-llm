Table B4.57: SnpCleanFwd and SnpNotSharedDirtyFwd Snoopee state transitions with Clean and Dirty tags

| Snoopee cache state </br > Initial | Snoopee cache state </br> Final expected | Snoopee cache state </br> Final permitted | RetToSrc | Response to Requester | Response to Home               | TagOp value in response to Home </br> Initial start state of Dirty ᵃ | TagOp value in response to Home </br> Initial start state of Dirty | TagOp value in response to Home </br> Initial start state of Invalid or Clean |
|------------------------------------|------------------------------------------|-------------------------------------------|----------|-----------------------|--------------------------------|----------------------------------------------------------------------|--------------------------------------------------------------------|-------------------------------------------------------------------------------|
| I                                  | I                                        | -                                         | X ᵇ      | No Fwd                | SnpResp\_I                     | -                                                                    | -                                                                  | -                                                                             |
| UC                                 | SC                                       | I                                         | 0        | CompData\_SC          | SnpResp\_SC\_Fwded\_SC         | -                                                                    | -                                                                  | -                                                                             |
| UC                                 | SC                                       | I                                         | 1        | CompData\_SC          | SnpRespData\_SC\_Fwded\_SC     | -                                                                    | -                                                                  | I,Transfer                                                                    |
| UC                                 | I                                        | -                                         | 0        | CompData\_SC          | SnpResp\_I\_Fwded\_SC          | -                                                                    | -                                                                  | -                                                                             |
| UC                                 | I                                        | -                                         | 1        | CompData\_SC          | SnpRespData\_I\_Fwded\_SC      | -                                                                    | -                                                                  | I,Transfer                                                                    |
| UCE                                | I                                        | -                                         | X ᵇ      | No Fwd                | SnpResp\_I                     | -                                                                    | -                                                                  | -                                                                             |
| UD                                 | SD ᶜ                                     | -                                         | 0        | CompData\_SC          | SnpResp\_SD\_Fwded\_SC         | P                                                                    | -                                                                  | -                                                                             |
| UD                                 | SD ᶜ                                     | -                                         | 1        | CompData\_SC          | SnpRespData\_SD\_Fwded\_SC     | P                                                                    | Transfer                                                           | I,Transfer                                                                    |
| UD                                 | SC                                       | I                                         | 0        | CompData\_SD\_PD      | SnpResp\_SC\_Fwded\_SD\_PD     | NP                                                                   | -                                                                  | -                                                                             |
| UD                                 | SC                                       | I                                         | 1        | CompData\_SD\_PD      | SnpRespData\_SC\_Fwded\_SD\_PD | NP                                                                   | -                                                                  | I,Transfer                                                                    |
| UD                                 | SC                                       | I                                         | X ᵇ      | CompData\_SC          | SnpRespData\_SC\_PD\_Fwded\_SC | P                                                                    | Update                                                             | I,Transfer                                                                    |
| UD                                 | I                                        | -                                         | 0        | CompData\_SD\_PD      | SnpResp\_I\_Fwded\_SD\_PD      | NP                                                                   | -                                                                  | -                                                                             |
| UD                                 | I                                        | -                                         | 1        | CompData\_SD\_PD      | SnpRespData\_I\_Fwded\_SD\_PD  | NP                                                                   | -                                                                  | I,Transfer                                                                    |
| UD                                 | I                                        | -                                         | X ᵇ      | CompData\_SC          | SnpRespData\_I\_PD\_Fwded\_SC  | P                                                                    | Update                                                             | I,Transfer                                                                    |
| UDP                                | I                                        | -                                         | X ᵇ      | No Fwd                | SnpRespDataPtl\_I\_PD          | -                                                                    | -                                                                  | I                                                                             |
| SC                                 | SC                                       | I                                         | 0        | CompData\_SC          | SnpResp\_SC\_Fwded\_SC         | -                                                                    | -                                                                  | -                                                                             |
| SC                                 | SC                                       | I                                         | 1        | CompData\_SC          | SnpRespData\_SC\_Fwded\_SC     | -                                                                    | -                                                                  | I,Transfer                                                                    |
| SC                                 | I                                        | -                                         | 0        | CompData\_SC          | SnpResp\_I\_Fwded\_SC          | -                                                                    | -                                                                  | -                                                                             |
| SC                                 | I                                        | -                                         | 1        | CompData\_SC          | SnpRespData\_I\_Fwded\_SC      | -                                                                    | -                                                                  | I,Transfer                                                                    |
| SD                                 | SD ᵇ                                     | -                                         | 0        | CompData\_SC          | SnpResp\_SD\_Fwded\_SC         | P                                                                    | -                                                                  | -                                                                             |
| SD                                 | SD ᵇ                                     | -                                         | 1        | CompData\_SC          | SnpRespData\_SD\_Fwded\_SC     | P                                                                    | Transfer                                                           | I,Transfer                                                                    |
| SD                                 | SC                                       | I                                         | 0        | CompData\_SD\_PD      | SnpResp\_SC\_Fwded\_SD\_PD     | NP                                                                   | -                                                                  | -                                                                             |
| SD                                 | SC                                       | I                                         | 1        | CompData\_SD\_PD      | SnpRespData\_SC\_Fwded\_SD\_PD | NP                                                                   | -                                                                  | I,Transfer                                                                    |
| SD                                 | SC                                       | I                                         | X ᵇ      | CompData\_SC          | SnpRespData\_SC\_PD\_Fwded\_SC | P                                                                    | Update                                                             | I,Transfer                                                                    |
| SD                                 | I                                        | -                                         | 0        | CompData\_SD\_PD      | SnpResp\_I\_Fwded\_SD\_PD      | NP                                                                   | -                                                                  | -                                                                             |
| SD                                 | I                                        | -                                         | 1        | CompData\_SD\_PD      | SnpRespData\_I\_Fwded\_SD\_PD  | NP                                                                   | -                                                                  | I,Transfer                                                                    |
| SD                                 | I                                        | -                                         | X ᵇ      | CompData\_SC          | SnpRespData\_I\_PD\_Fwded\_SC  | P                                                                    | Update                                                             | I,Transfer                                                                    |

- ᵃ Indicates if the transition itself is permitted or not. This column is only relevant when the tag initial state is Dirty.
- ᵇ The protocol requirements apply for both states of RetToSrc.
- ᶜ This state transition is not permitted if DoNotGoToSD is asserted

#### B4.8.3.4 SnpUniqueFwd

Use of the SnpUniqueFwd snoop is only permitted if the cache line is cached at a single RN-F:

- Home is permitted to send the SnpUniqueFwd snoop to an RN-F in Shared state if Home determines that the Invalidating snoop needs to be sent to only one cache.